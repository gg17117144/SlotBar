System.register("chunks:///_virtual/ApiService.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ServiceBase.ts"],(function(e){var r,t,n,s;return{setters:[function(e){r=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){n=e.cclegacy},function(e){s=e.ServiceBase}],execute:function(){n._RF.push({},"180f0J1H4FAfJCvhBdvd8nu","ApiService",void 0);e("ApiService",function(){function e(){}return e.register=function(){var e=r(t().mark((function e(r,n,u){var a,c,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(s.API_BASE+"/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:n,email:u})});case 3:if((a=e.sent).ok){e.next=10;break}return e.next=7,a.json().catch((function(){return null}));case 7:return c=e.sent,o=(null==c?void 0:c.message)||"註冊失敗："+a.status,e.abrupt("return",{success:!1,message:o});case 10:return e.abrupt("return",{success:!0});case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",{success:!1,message:e.t0.message||"網路錯誤，請稍後再試"});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(r,t,n){return e.apply(this,arguments)}}(),e.login=function(){var e=r(t().mark((function e(r,n){var u,a,c,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(s.API_BASE+"/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:n})});case 3:if((u=e.sent).ok){e.next=10;break}return e.next=7,u.json().catch((function(){return null}));case 7:return a=e.sent,c=(null==a?void 0:a.message)||"登入失敗："+u.status,e.abrupt("return",{success:!1,message:c});case 10:return e.next=12,u.json();case 12:return o=e.sent,console.log("取得token成功：",o.data.token),s.token=o.data.token,e.abrupt("return",{success:!0});case 18:return e.prev=18,e.t0=e.catch(0),e.abrupt("return",{success:!1,message:e.t0.message||"網路錯誤，請稍後再試"});case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(r,t){return e.apply(this,arguments)}}(),e.getMe=function(){var e=r(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.token){e.next=2;break}throw new Error("尚未登入");case 2:return e.next=4,fetch(s.API_BASE+"/me",{headers:{Authorization:"Bearer "+s.token}});case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("取得使用者資訊失敗："+r.status);case 7:return e.next=9,r.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/EventCenter.ts",["cc"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy,n=e.EventTarget}],execute:function(){t._RF.push({},"43706PYRXxCro3LZLeY35P5","EventCenter",void 0);var r=new n,u=new n,s=new n;e("default",{slotBarEventBus:r,loginViewEventBus:u,tipTextEventBus:s});t._RF.pop()}}}));

System.register("chunks:///_virtual/EventTypes.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"bd193hcWI9DwLqxpQnJ4eZP","EventTypes",void 0);e("soltEventTypes",function(e){return e.InitReel="InitReel",e.SpinStart="SpinStart",e.FetchResult="FetchResult",e.AllReelsFinished="AllReelsFinished",e.ShowResult="ShowResult",e.Jackpot="Jackpot",e.UpdateCoinText="updateCoinText",e}({})),e("loginViewEventTypes",function(e){return e.OpenLoginView="OpenLoginView",e.OpenRegisterView="OpenRegisterView",e}({})),e("tipTextEventTypes",function(e){return e.ShowTipText="ShowTipText",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/LoginView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ApiService.ts","./EventCenter.ts","./EventTypes.ts"],(function(t){var e,n,i,o,r,s,u,c,l,a,p,g,f,h,v,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){u=t.cclegacy,c=t._decorator,l=t.EditBox,a=t.Button,p=t.Component,g=t.director},function(t){f=t.ApiService},function(t){h=t.default},function(t){v=t.loginViewEventTypes,w=t.tipTextEventTypes}],execute:function(){var B,b,d,m,y,x,S,T,k,E,L;u._RF.push({},"480bavwNJFAQKtnbnXIhoH1","LoginView",void 0);var C=c.ccclass,I=c.property;t("LoginView",(B=C("LoginView"),b=I(l),d=I(l),m=I(a),y=I(a),B((T=e((S=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,i(e,"accountInput",T,o(e)),i(e,"passwordInput",k,o(e)),i(e,"loginButton",E,o(e)),i(e,"registerButton",L,o(e)),e}n(e,t);var u=e.prototype;return u.onEnable=function(){this.loginButton.node.on("click",this.onLoginButtonClickSpin,this),this.registerButton.node.on("click",this.onRegisterButtonClickSpin,this)},u.onDisable=function(){this.loginButton.node.off("click",this.onLoginButtonClickSpin,this),this.registerButton.node.off("click",this.onRegisterButtonClickSpin,this)},u.onLoginButtonClickSpin=function(){var t=r(s().mark((function t(){var e,n,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.accountInput.string.trim(),n=this.passwordInput.string.trim(),e&&n){t.next=6;break}return console.warn("請輸入帳號密碼"),h.tipTextEventBus.emit(w.ShowTipText,{text:"請輸入帳號密碼"}),t.abrupt("return");case 6:return t.prev=6,t.next=9,f.login(e,n);case 9:i=t.sent,console.log(i),console.log(i.message),i.success?(console.log("✅ 登入成功！"),h.tipTextEventBus.emit(w.ShowTipText,{text:"✅ 登入成功！"}),g.loadScene("SlotScene")):(console.warn("❌ 登入失敗：",i.message),h.tipTextEventBus.emit(w.ShowTipText,{text:i.message||"❌ 登入失敗，請稍後再試"})),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(6),console.error("❌ 登入失敗：",t.t0);case 18:case"end":return t.stop()}}),t,this,[[6,15]])})));return function(){return t.apply(this,arguments)}}(),u.onRegisterButtonClickSpin=function(){h.loginViewEventBus.emit(v.OpenRegisterView)},e}(p)).prototype,"accountInput",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(S.prototype,"passwordInput",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"loginButton",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(S.prototype,"registerButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=S))||x));u._RF.pop()}}}));

System.register("chunks:///_virtual/LoginViewController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventCenter.ts","./EventTypes.ts"],(function(e){var i,n,t,o,r,s,l,c,u,a;return{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,l=e.Node,c=e.Component},function(e){u=e.default},function(e){a=e.loginViewEventTypes}],execute:function(){var g,p,f,w,V,h,v;r._RF.push({},"fc479kE8eFLX61a/VlAf7ou","LoginViewController",void 0);var d=s.ccclass,y=s.property;e("LoginViewController",(g=d("LoginViewController"),p=y(l),f=y(l),g((h=i((V=function(e){function i(){for(var i,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i=e.call.apply(e,[this].concat(r))||this,t(i,"loginNode",h,o(i)),t(i,"RegisterNode",v,o(i)),i}n(i,e);var r=i.prototype;return r.onEnable=function(){u.loginViewEventBus.on(a.OpenLoginView,this.OpenLoginView,this),u.loginViewEventBus.on(a.OpenRegisterView,this.OpenRegisterView,this)},r.onDisable=function(){u.loginViewEventBus.off(a.OpenLoginView,this.OpenLoginView,this),u.loginViewEventBus.off(a.OpenRegisterView,this.OpenRegisterView,this)},r.OpenLoginView=function(){this.loginNode.active=!0,this.RegisterNode.active=!1},r.OpenRegisterView=function(){this.loginNode.active=!1,this.RegisterNode.active=!0},i}(c)).prototype,"loginNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(V.prototype,"RegisterNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=V))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./SlotController.ts","./EventCenter.ts","./EventTypes.ts","./MockData.ts","./ApiService.ts","./ServiceBase.ts","./WebSocketService.ts","./SymbolData.ts","./TipTextController.ts","./LoginView.ts","./LoginViewController.ts","./RegisterView.ts","./ReelSlot.ts","./ReelView.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MockData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var a,t,i,r;return{setters:[function(e){a=e.inheritsLoose},function(e){t=e.cclegacy,i=e._decorator,r=e.Component}],execute:function(){var o;t._RF.push({},"d11d0dy0eFA/a8/4mT4k5cg","MockData",void 0);var p=i.ccclass;i.property,e("MockData",p("getMockSymData")(o=function(e){function t(){return e.apply(this,arguments)||this}return a(t,e),t.getMockSymbolData=function(){return[{type:"apple",imageUrl:"https://upload.wikimedia.org/wikipedia/commons/1/15/Red_Apple.jpg"},{type:"banana",imageUrl:"https://upload.wikimedia.org/wikipedia/commons/8/8a/Banana-Single.jpg"},{type:"cherry",imageUrl:"https://upload.wikimedia.org/wikipedia/commons/b/bb/Cherry_Stella444.jpg"},{type:"grape",imageUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/42/Green_grape_fruit.jpg/640px-Green_grape_fruit.jpg"},{type:"lemon",imageUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/Citrus_limon_extracted_1.png/640px-Citrus_limon_extracted_1.png"}]},t.getMockSlotBar=function(){for(var e=["apple","banana","cherry","grape","lemon"],a=[],t=0;t<3;t++){var i=Math.floor(Math.random()*e.length);a.push(e[i])}return a},t}(r))||o);t._RF.pop()}}}));

System.register("chunks:///_virtual/ReelSlot.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,r,s,l,a,h,u,c,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,l=t.Prefab,a=t.Node,h=t.instantiate,u=t.Sprite,c=t.tween,f=t.Component}],execute:function(){var m,p,b,d,y,g,S,v,N;r._RF.push({},"de368QPlexEBrAqTZdp89rF","ReelSlot",void 0);var D=s.ccclass,I=s.property;t("ReelSlot",(m=D("ReelSlot"),p=I(l),b=I(a),d=I(Number),m((S=e((g=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"reelItemPrefab",S,o(e)),n(e,"contentNode",v,o(e)),e.itemHeight=100,e.symbolNodes=[],e.symbolDataList=[],e.currentOffset=0,n(e,"currentSymbolIndex",N,o(e)),e.isSpinning=!1,e.onSpinEnd=null,e}i(e,t);var r=e.prototype;return r.initReel=function(t){this.symbolDataList=t,this.currentSymbolIndex=Math.floor(t.length/2),this.currentOffset=0,this.contentNode.removeAllChildren(),this.symbolNodes=[];for(var e=0;e<t.length;e++){var i=h(this.reelItemPrefab),n=i.getComponentInChildren(u);n&&t[e].spriteFrame&&(n.spriteFrame=t[e].spriteFrame),i.setPosition(0,0),this.contentNode.addChild(i),this.symbolNodes.push(i)}this.contentNode.setPosition(0,0),this.symbolNodes.reverse(),this.updateVisibleSymbols()},r.updateVisibleSymbols=function(){for(var t=this.symbolNodes.length,e=(t-1)/2*this.itemHeight,i=t*this.itemHeight,n=0;n<t;n++){for(var o=this.symbolNodes[n],r=e-n*this.itemHeight-this.currentOffset;r<-e;)r+=i;for(;r>e;)r-=i;o.setPosition(0,r)}},r.spinToSymbol=function(t,e,i,n){var o=this;if(void 0===i&&(i=.5),this.isSpinning)console.warn("正在轉動中，請稍後");else{var r=this.symbolDataList.findIndex((function(e){return e.type===t}));if(-1!==r){this.isSpinning=!0,this.onSpinEnd=n||null;var s=this.currentSymbolIndex,l=(r-s+this.symbolDataList.length)%this.symbolDataList.length;0===l&&(l=this.symbolDataList.length),l=e*this.symbolDataList.length+l;var a=this.currentOffset+l*this.itemHeight;i*=e,c({offset:this.currentOffset}).to(i,{offset:a},{onUpdate:function(t){o.currentOffset=t.offset,o.updateVisibleSymbols()},onComplete:function(){var e=o.symbolDataList.length*o.itemHeight;o.currentOffset=o.currentOffset%e,o.currentSymbolIndex=r,o.isSpinning=!1,o.onSpinEnd&&o.onSpinEnd(),console.log("完成滑動到符號:",t)}}).start()}else console.warn("找不到指定的符號:",t)}},e}(f)).prototype,"reelItemPrefab",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(g.prototype,"contentNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(g.prototype,"currentSymbolIndex",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=g))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/ReelView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventTypes.ts","./ReelSlot.ts","./EventCenter.ts"],(function(t){var e,n,i,o,s,l,r,u,a,c,h,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Button,u=t.RichText,a=t.Component},function(t){c=t.soltEventTypes},function(t){h=t.ReelSlot},function(t){p=t.default}],execute:function(){var f,R,v,B,d,C,T,b,w,g,x;s._RF.push({},"977eb0Z6dxLUop/CzQt8VLT","ReelView",void 0);var m=l.ccclass,y=l.property;t("ReelView",(f=m("ReelView"),R=y(h),v=y(r),B=y(u),d=y(u),f((b=e((T=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"reelViews",b,o(e)),i(e,"startButton",w,o(e)),i(e,"resultRichText",g,o(e)),i(e,"coinRichText",x,o(e)),e.spinCompletedCount=0,e}n(e,t);var s=e.prototype;return s.onEnable=function(){this.startButton.node.on("click",this.onClickSpin,this),p.slotBarEventBus.on(c.InitReel,this.onInitReel,this),p.slotBarEventBus.on(c.FetchResult,this.onFetchResult,this),p.slotBarEventBus.on(c.UpdateCoinText,this.updateCoinText,this)},s.onDisable=function(){this.startButton.node.off("click",this.onClickSpin,this),p.slotBarEventBus.off(c.InitReel,this.onInitReel,this),p.slotBarEventBus.off(c.FetchResult,this.onFetchResult,this),p.slotBarEventBus.off(c.UpdateCoinText,this.updateCoinText,this)},s.onInitReel=function(t){for(var e=0;e<this.reelViews.length;e++)this.reelViews[e].initReel(t)},s.onFetchResult=function(t){var e=this;this.startButton.node.active=!1;for(var n=function(){var n=e.reelViews[i].getComponent(h);if(n){var o=3+i,s=t.result.map((function(t){return String(t)}));console.log("模擬結果: "+s[i]);null==n||n.spinToSymbol(s[i],o,.5,(function(){e.spinCompletedCount++,e.spinCompletedCount===e.reelViews.length&&(e.showFinalResult(s),e.updateCoinText(t.balance),e.startButton.node.active=!0,p.slotBarEventBus.emit(c.AllReelsFinished))}))}},i=0;i<this.reelViews.length;i++)n()},s.onClickSpin=function(){this.spinCompletedCount=0,this.resultRichText.string="🎰 旋轉中...",p.slotBarEventBus.emit(c.SpinStart)},s.showFinalResult=function(t){this.resultRichText.string="🎉 結果："+t.join(" - ")},s.updateCoinText=function(t){this.coinRichText.string="💰 金幣："+t},e}(a)).prototype,"reelViews",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=e(T.prototype,"startButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(T.prototype,"resultRichText",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(T.prototype,"coinRichText",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=T))||C));s._RF.pop()}}}));

System.register("chunks:///_virtual/RegisterView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ApiService.ts","./EventCenter.ts","./EventTypes.ts"],(function(t){var e,n,i,r,o,u,s,c,a,l,p,g,f,h,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.asyncToGenerator,u=t.regeneratorRuntime},function(t){s=t.cclegacy,c=t._decorator,a=t.EditBox,l=t.Button,p=t.Component},function(t){g=t.ApiService},function(t){f=t.default},function(t){h=t.loginViewEventTypes,b=t.tipTextEventTypes}],execute:function(){var w,v,m,x,B,T,k,y,d,S,E,L,I;s._RF.push({},"dbc1bxa0ctJjKFiG7wyurhw","RegisterView",void 0);var R=c.ccclass,V=c.property;t("RegisterView",(w=R("RegisterView"),v=V(a),m=V(a),x=V(a),B=V(l),T=V(l),w((d=e((y=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return e=t.call.apply(t,[this].concat(o))||this,i(e,"accountInput",d,r(e)),i(e,"passwordInput",S,r(e)),i(e,"emailInput",E,r(e)),i(e,"backLoginButton",L,r(e)),i(e,"registerButton",I,r(e)),e}n(e,t);var s=e.prototype;return s.onEnable=function(){this.backLoginButton.node.on("click",this.onLoginButtonClickSpin,this),this.registerButton.node.on("click",this.onRegisterButtonClickSpin,this)},s.onDisable=function(){this.backLoginButton.node.off("click",this.onLoginButtonClickSpin,this),this.registerButton.node.off("click",this.onRegisterButtonClickSpin,this)},s.onLoginButtonClickSpin=function(){f.loginViewEventBus.emit(h.OpenLoginView)},s.onRegisterButtonClickSpin=function(){var t=o(u().mark((function t(){var e,n,i,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.accountInput.string.trim(),n=this.passwordInput.string.trim(),i=this.emailInput.string.trim(),e&&n){t.next=7;break}return console.log("請輸入帳號或密碼"),f.tipTextEventBus.emit(b.ShowTipText,{text:"請輸入帳號或密碼"}),t.abrupt("return");case 7:if(i){t.next=11;break}return f.tipTextEventBus.emit(b.ShowTipText,{text:"請輸入電子信箱"}),console.warn("請輸入電子信箱"),t.abrupt("return");case 11:return t.prev=11,t.next=14,g.register(e,n,i);case 14:(r=t.sent).success?(console.log("✅ 註冊成功！"),f.tipTextEventBus.emit(b.ShowTipText,{text:"✅ 註冊成功！請到信箱收取信件"}),f.loginViewEventBus.emit(h.OpenLoginView)):(console.warn("❌ 註冊失敗：",r.message),f.tipTextEventBus.emit(b.ShowTipText,{text:r.message||"❌ 註冊失敗，請稍後再試"})),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(11),console.error("❌ 登入失敗：",t.t0),f.tipTextEventBus.emit(b.ShowTipText,{text:"❌ 註冊失敗，請稍後再試"});case 22:case"end":return t.stop()}}),t,this,[[11,18]])})));return function(){return t.apply(this,arguments)}}(),e}(p)).prototype,"accountInput",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(y.prototype,"passwordInput",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(y.prototype,"emailInput",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(y.prototype,"backLoginButton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(y.prototype,"registerButton",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=y))||k));s._RF.pop()}}}));

System.register("chunks:///_virtual/ServiceBase.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"3c0f3CkR8hJRJyMeXFs/H1K","ServiceBase",void 0);var c=e("ServiceBase",(function(){}));c.token=null,c.API_BASE="https://go-slotbar-jwt.onrender.com",c.Websocket_BASE="wss://go-slotbar-jwt.onrender.com/ws",t._RF.pop()}}}));

System.register("chunks:///_virtual/SlotController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventCenter.ts","./EventTypes.ts","./MockData.ts","./WebSocketService.ts"],(function(t){var e,n,r,o,s,a,i,c,u,l,p,f,h;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy,s=t._decorator,a=t.assetManager,i=t.Texture2D,c=t.SpriteFrame,u=t.Component},function(t){l=t.default},function(t){p=t.soltEventTypes},function(t){f=t.MockData},function(t){h=t.WebSocketService}],execute:function(){var v;o._RF.push({},"8a0ba21XptMbr6LbtDOcoZy","SlotController",void 0);var S=s.ccclass;s.property,t("SlotController",S("SlotController")(v=function(t){function o(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).symbolDataList=[],e.spinCompletedCount=0,e}e(o,t);var s=o.prototype;return s.onEnable=function(){l.slotBarEventBus.on(p.SpinStart,this.onSpinStart,this),l.slotBarEventBus.on(p.AllReelsFinished,this.onAllReelsFinished,this)},s.onDisable=function(){l.slotBarEventBus.off(p.SpinStart,this.onSpinStart,this),l.slotBarEventBus.off(p.AllReelsFinished,this.onAllReelsFinished,this)},s.start=function(){var t=n(r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=f.getMockSymbolData(),this.symbolDataList=e,t.next=5,this.preloadAllSymbols(this.symbolDataList);case 5:return t.next=7,this.connectWebSocket();case 7:l.slotBarEventBus.emit(p.InitReel,e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error("讀取載入圖片失敗或token有問題:",t.t0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),s.connectWebSocket=function(){var t=n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:h.connectWebSocket(n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("📩 收到後端訊息：",e),"SpinResult"===e.event&&l.slotBarEventBus.emit(p.FetchResult,e.data);case 2:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s.onSpinStart=function(){var t=n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:h.spinStart(10);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s.onAllReelsFinished=function(){var t=n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s.preloadAllSymbols=function(t){var e=0;return new Promise((function(n,r){t.forEach((function(o){a.loadRemote(o.imageUrl,(function(s,a){if(s)r(s);else{var u=new i;u.image=a;var l=new c;l.texture=u,o.spriteFrame=l,++e===t.length&&n()}}))}))}))},o}(u))||v);o._RF.pop()}}}));

System.register("chunks:///_virtual/SymbolData.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"afb0cqbqaNN2KeK9InMOOrF","SymbolData",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/TipTextController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventCenter.ts","./EventTypes.ts"],(function(t){var e,i,n,o,r,p,a,s,l,c,u,T,d,h,f,v,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,p=t._decorator,a=t.Prefab,s=t.Node,l=t.NodePool,c=t.tween,u=t.UIOpacity,T=t.instantiate,d=t.RichText,h=t.Vec3,f=t.Component},function(t){v=t.default},function(t){P=t.tipTextEventTypes}],execute:function(){var x,y,w,b,g,m,N;r._RF.push({},"2d1c4795phO14RWWHskK9zJ","TipTextController",void 0);var C=p.ccclass,z=p.property;t("T",(x=C("TipTextController"),y=z(a),w=z(s),x((m=e((g=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),p=0;p<i;p++)r[p]=arguments[p];return e=t.call.apply(t,[this].concat(r))||this,n(e,"tipTextPrefab",m,o(e)),n(e,"tipParent",N,o(e)),e.tipPool=new l,e.currentTipNode=null,e.fadeTween=void 0,e.tipTextListener=function(t){e.onShowTip(t.text,t.duration)},e}i(e,t);var r=e.prototype;return r.onEnable=function(){v.tipTextEventBus.on(P.ShowTipText,this.tipTextListener,this)},r.onDisable=function(){v.tipTextEventBus.off(P.ShowTipText,this.tipTextListener,this)},r.onShowTip=function(t,e){var i,n=this;(void 0===e&&(e=2),this.currentTipNode)&&(c(this.currentTipNode).stop(),this.currentTipNode.getComponent(u)&&this.fadeTween&&this.fadeTween.stop(),this.currentTipNode.removeFromParent(),this.tipPool.put(this.currentTipNode),this.currentTipNode=null,this.fadeTween=void 0);this.tipPool.size()>0?i=this.tipPool.get():(console.log("生成新的tipTextPrefab"),i=T(this.tipTextPrefab)),this.tipParent.addChild(i);var o=i.getComponent(d);o&&(o.string=t),this.currentTipNode=i;var r=i.getComponent(u);r||(r=i.addComponent(u)),i.setPosition(0,220,0),r.opacity=0,c(i).to(.3,{position:new h(0,250,0)}).start(),this.fadeTween=c(r).to(.3,{opacity:255}).delay(e).to(.3,{opacity:0}).call((function(){i.removeFromParent(),n.tipPool.put(i),n.currentTipNode===i&&(n.currentTipNode=null),n.fadeTween=void 0})).start()},e}(f)).prototype,"tipTextPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(g.prototype,"tipParent",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=g))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/WebSocketService.ts",["cc","./ServiceBase.ts","./EventCenter.ts","./EventTypes.ts"],(function(e){var t,o,n,c;return{setters:[function(e){t=e.cclegacy},function(e){o=e.ServiceBase},function(e){n=e.default},function(e){c=e.tipTextEventTypes}],execute:function(){t._RF.push({},"2d657e2kHdHEJsGHkXZuZj+","WebSocketService",void 0),e("WebSocketService",function(){function e(){}return e.connectWebSocket=function(e){this.socket=new WebSocket(o.Websocket_BASE+"?token="+o.token),this.socket.onopen=function(){n.tipTextEventBus.emit(c.ShowTipText,{text:"✅ WebSocket 已連線"}),console.log("✅ WebSocket 已連線")},this.socket.onmessage=function(t){var o=JSON.parse(t.data);e(o)},this.socket.onerror=function(e){n.tipTextEventBus.emit(c.ShowTipText,{text:"WebSocket 錯誤"}),console.error("WebSocket 錯誤",e)},this.socket.onclose=function(){n.tipTextEventBus.emit(c.ShowTipText,{text:"WebSocket 已關閉"}),console.log("WebSocket 已關閉")}},e.spinStart=function(e){if(!this.socket||this.socket.readyState!==WebSocket.OPEN)throw new Error("WebSocket 尚未連線");var t={event:"SpinStart",data:{bet:e}};this.socket.send(JSON.stringify(t))},e}()).socket=null,t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});